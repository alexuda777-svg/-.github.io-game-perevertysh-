<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé≤ –ü–µ—Ä–µ–≤–µ—Ä—Ç—ã—à: –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –í–æ–∑—Ä–∞—Å—Ç–æ–≤ (–≠–ü–ò–ß–ù–ê–Ø –í–ï–†–°–ò–Ø)</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{
            background:linear-gradient(-45deg,#ff9a9e,#fecfef,#fecfef,#ff9a9e);
            background-size:400% 400%;
            animation:gradientShift 15s ease infinite;
            color:#333;
            font-family:'Comic Sans MS',cursive;
            min-height:100vh;
            overflow-x:hidden
        }
        @keyframes gradientShift{
            0%,100%{background-position:0% 50%}
            50%{background-position:100% 50%}
        }
        .container{max-width:1000px;margin:0 auto;padding:20px}
        .header{
            text-align:center;
            background:linear-gradient(90deg,#ffd700,#ff6b35,#ffd700);
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            font-size:3em;margin:20px 0;
            text-shadow:0 0 30px rgba(255,215,0,0.8);
            animation:pulse 2s infinite
        }
        @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
        .status-bar{
            display:grid;grid-template-columns:1fr 1fr 1fr;gap:15px;
            background:#fff8dc;border-radius:25px;padding:20px;margin:20px 0;
            box-shadow:0 15px 40px rgba(0,0,0,0.2)
        }
        .stat-card{background:#fff;border-radius:15px;padding:15px;text-align:center;
            box-shadow:0 8px 25px rgba(0,0,0,0.1);transition:all 0.3s}
        .stat-card:hover{transform:translateY(-5px)}
        .character-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin:20px 0}
        .character-card{
            background:#fff;border-radius:20px;padding:20px;text-align:center;
            box-shadow:0 10px 30px rgba(0,0,0,0.15);position:relative;
            transition:all 0.4s ease;overflow:hidden
        }
        .character-card::before{
            content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;
            background:linear-gradient(90deg,transparent,rgba(255,255,255,0.4),transparent);
            transition:0.5s
        }
        .character-card:hover::before{left:100%}
        .character-card:hover{transform:scale(1.05) rotate(1deg)}
        .age-2{background:linear-gradient(135deg,#ffe4b5,#ffdab9)}
        .age-9{background:linear-gradient(135deg,#b8e6b8,#98d8a8)}
        .age-15{background:linear-gradient(135deg,#a8d5e2,#87c5d2)}
        .age-17{background:linear-gradient(135deg,#f4b6c2,#e8a2b0)}
        .scene-text{
            background:#fff;border-radius:25px;padding:30px;margin:25px 0;
            font-size:1.4em;line-height:1.7;box-shadow:0 20px 50px rgba(0,0,0,0.2);
            min-height:250px;max-height:350px;overflow-y:auto;
            position:relative
        }
        .typewriter{overflow:hidden;border-right:.2em solid #ffd700;white-space:pre-wrap}
        .highlight{color:#ff6b35;font-weight:bold;text-shadow:0 0 10px #ff6b35}
        .danger{color:#e74c3c;font-weight:bold}
        .success{color:#27ae60;font-weight:bold}
        .choices{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:30px 0}
        button{
            background:linear-gradient(45deg,#ff6b35,#f7931e,#ff6b35);
            background-size:200% 200%;animation:buttonGlow 3s ease infinite;
            color:white;border:none;border-radius:30px;padding:20px 35px;
            font-size:1.3em;font-weight:bold;cursor:pointer;transition:all 0.3s;
            box-shadow:0 10px 30px rgba(255,107,53,0.4);font-family:'Comic Sans MS',cursive;
            position:relative;overflow:hidden
        }
        @keyframes buttonGlow{0%,100%{background-position:0% 50%}50%{background-position:100% 50%}}
        button:hover{
            transform:translateY(-5px) scale(1.05);
            box-shadow:0 15px 40px rgba(255,107,53,0.6);
            background-position:100% 50%
        }
        button:disabled{background:#bdc3c7;transform:none;cursor:not-allowed;box-shadow:none}
        .age-effect{
            position:fixed;top:30%;left:50%;transform:translateX(-50%);
            font-size:4em;font-weight:bold;color:#ffd700;text-shadow:0 0 40px #ffd700;
            pointer-events:none;animation:agePop 3s ease-out forwards;z-index:1000;
            text-align:center
        }
        @keyframes agePop{
            0%{opacity:0;transform:translateX(-50%) translateY(-100px) scale(0.3)}
            30%{opacity:1;transform:translateX(-50%) translateY(0) scale(1.3)}
            70%{opacity:1;transform:translateX(-50%) translateY(0) scale(1)}
            100%{opacity:0;transform:translateX(-50%) translateY(-50px) scale(1.1)}
        }
        .hidden{display:none}
        .victory-screen,.defeat-screen{
            position:fixed;top:0;left:0;width:100%;height:100vh;
            background:linear-gradient(45deg,rgba(255,215,0,0.95),rgba(255,107,53,0.95));
            color:#333;text-align:center;display:flex;flex-direction:column;
            justify-content:center;align-items:center;font-size:2.5em;z-index:10000;
            animation:victoryPulse 1s infinite
        }
        @keyframes victoryPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.02)}}
        .progress-bar{
            width:100%;height:20px;background:#ddd;border-radius:10px;
            overflow:hidden;margin:20px 0
        }
        .progress-fill{
            height:100%;background:linear-gradient(90deg,#27ae60,#2ecc71);
            width:0%;transition:width 1s ease;border-radius:10px
        }
        .emoji-rain{position:fixed;width:100%;height:100vh;pointer-events:none;top:0;left:0}
        .emoji{position:absolute;font-size:3em;animation:fall 5s linear infinite}
        @keyframes fall{
            0%{transform:translateY(-100vh) rotate(0deg)}
            100%{transform:translateY(120vh) rotate(720deg)}
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="header">üé≤ –ü–µ—Ä–µ–≤–µ—Ä—Ç—ã—à: –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –í–æ–∑—Ä–∞—Å—Ç–æ–≤</h1>
        
        <div class="status-bar">
            <div class="stat-card">
                <div style="font-size:2em">üåü</div>
                <div>–£—Ä–æ–≤–µ–Ω—å</div>
                <div id="level" style="font-size:2.5em;font-weight:bold">1</div>
            </div>
            <div class="stat-card">
                <div style="font-size:2em">üïê</div>
                <div>–ü—Ä–µ–¥–º–µ—Ç—ã</div>
                <div id="magic-count" style="font-size:2.5em;font-weight:bold">0/5</div>
            </div>
            <div class="stat-card">
                <div style="font-size:2em">‚≠ê</div>
                <div>–û—á–∫–∏</div>
                <div id="score-value" style="font-size:2.5em;font-weight:bold">0</div>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>

        <div class="character-grid" id="characters"></div>
        
        <div id="scene" class="scene-text"></div>
        <div id="choices" class="choices"></div>
    </div>

    <div id="victory-screen" class="victory-screen hidden">
        <h2 style="font-size:4em;margin:20px">üéâ –≠–ü–ò–ß–ù–ê–Ø –ü–û–ë–ï–î–ê! üéâ</h2>
        <p style="font-size:1.5em;margin:30px;max-width:600px">
            –í—ã —Å–æ–±—Ä–∞–ª–∏ –≤—Å–µ 5 –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤, –ø–æ–±–µ–¥–∏–ª–∏ –∑–ª–æ–¥–µ–µ–≤-—Å–æ—Å–µ–¥–µ–π 
            –∏ –≤–µ—Ä–Ω—É–ª–∏ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –≤–æ–∑—Ä–∞—Å—Ç—ã! –î—Ä—É–∂–±–∞ –ø–æ–±–µ–¥–∏–ª–∞ –º–∞–≥–∏—é! üèÜ‚ú®
        </p>
        <div style="font-size:3em;margin:30px">–í—Ä–µ–º—è –∏–≥—Ä—ã: <span id="playtime">00:00</span></div>
        <button onclick="location.reload()" style="font-size:1.5em;padding:25px 50px">
            üéÆ –ù–æ–≤–∞—è –∏–≥—Ä–∞!
        </button>
    </div>

    <script>
        const gameState = {
            level: 1,
            score: 0,
            magicItems: 0,
            currentScene: 'start',
            playTime: 0,
            characters: {
                vova: {name: 'üë®‚Äçüíª –í–æ–≤–∞', age: 17, baseAge: 17, skills: ['–∏–≥—Ä—ã', '—Å–ø–æ—Ä—Ç'], emoji: 'üë®‚Äçüíª'},
                arseniy: {name: 'üé∏ –ê—Ä—Å–µ–Ω–∏–π', age: 15, baseAge: 15, skills: ['–º—É–∑—ã–∫–∞', '—Ç–∞–Ω—Ü—ã'], emoji: 'üé∏'},
                bogdan: {name: 'üîç –ë–æ–≥–¥–∞–Ω', age: 9, baseAge: 9, skills: ['–≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏'], emoji: 'üîç'},
                mark: {name: 'üçº –ú–∞—Ä–∫', age: 2, baseAge: 2, skills: ['–∏–≥—Ä–∞—Ç—å'], emoji: 'üçº'}
            },
            completedPuzzles: new Set()
        };

        const FULL_GAME = {
            park: {
                text: [
                    "üå≥ <span class='highlight'>–ì–û–†–û–î–°–ö–û–ô –ü–ê–†–ö</span> ‚Äî —è—Ä–∫–∏–π —Å–æ–ª–Ω–µ—á–Ω—ã–π –¥–µ–Ω—å!",
                    "–í–æ–≤–∞(17) –∏–≥—Ä–∞–µ—Ç –≤ —Ñ—É—Ç–±–æ–ª, –ê—Ä—Å–µ–Ω–∏–π(15) —Å–ª—É—à–∞–µ—Ç –º—É–∑—ã–∫—É,",
                    "–ë–æ–≥–¥–∞–Ω(9) —Å–æ–±–∏—Ä–∞–µ—Ç –ø–∞–∑–ª, –ú–∞—Ä–∫(2) –ø–æ–ª–∑–∞–µ—Ç –ø–æ —Ç—Ä–∞–≤–µ. üòÇ",
                    "<span class='danger'>–°–¢–†–ê–ù–ù–´–ï –ß–ê–°–´</span> –≤ –∫—É—Å—Ç–∞—Ö –Ω–∞—á–∏–Ω–∞—é—Ç —Å–≤–µ—Ç–∏—Ç—å—Å—è...",
                    "üåÄ –í–û–ó–†–ê–°–¢–ê –ú–ï–ù–Ø–Æ–¢–°–Ø –ù–ê–í–°–ï–ì–î–ê?! –ß—Ç–æ –¥–µ–ª–∞—Ç—å?!"
                ],
                choices: [
                    {text: "üïê –ü–æ–¥–æ–π—Ç–∏ –∫ –º–∞–≥–∏—á–µ—Å–∫–∏–º —á–∞—Å–∞–º", next: 'touchClock', effect: 'randomize'},
                    {text: "üèÉ‚Äç‚ôÇÔ∏è –ë—ã—Å—Ç—Ä–æ –±–µ–∂–∞—Ç—å –¥–æ–º–æ–π!", next: 'runHome'},
                    {text: "üîç –ë–æ–≥–¥–∞–Ω –∏—Å—Å–ª–µ–¥—É–µ—Ç –∫—É—Å—Ç—ã", next: 'investigatePark', req: {char: 'bogdan', age: 9}}
                ]
            },
            touchClock: {
                text: [
                    "üåÄ –ë–ê-–ë–ê-–ë–ê–•! ‚ö° –≠—Ñ—Ñ–µ–∫—Ç —Å—Ä–∞–±–æ—Ç–∞–ª!",
                    "–í–æ–≤–∞ —Å—Ç–∞–ª <span class='danger'>2 –ª–µ—Ç</span>, –ú–∞—Ä–∫ ‚Äî <span class='success'>17 –ª–µ—Ç</span>!",
                    "–ê—Ä—Å–µ–Ω–∏–π(15) ‚Üí 9 –ª–µ—Ç, –ë–æ–≥–¥–∞–Ω(9) ‚Üí 15 –ª–µ—Ç! üòÇü§Ø",
                    "–¢–µ–ø–µ—Ä—å –Ω–∞–¥–æ –∏–¥—Ç–∏ –≤ —à–∫–æ–ª—É ‚Äî –∑–≤–æ–Ω–æ–∫ —É–∂–µ –ø—Ä–æ–∑–≤–µ–Ω–µ–ª!"
                ],
                effect: 'randomize',
                choices: [{text: "üè´ –ë–µ–∂–∏–º –≤ —à–∫–æ–ª—É!", next: 'school1'}]
            },
            school1: {
                text: [
                    "üè´ <span class='highlight'>–®–ö–û–õ–ê</span> ‚Äî —É—Ä–æ–∫ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏!",
                    "–ú–∞—Ä–∫(17) –ª–µ–≥–∫–æ —Ä–µ—à–∞–µ—Ç —É—Ä–∞–≤–Ω–µ–Ω–∏—è, –í–æ–≤–∞(2) –ø–ª–∞—á–µ—Ç –Ω–∞ –ø–æ–ª—É üò≠",
                    "–£—á–∏—Ç–µ–ª—å: \"–ì–¥–µ –≤–∞—à–∏ —Ç–µ—Ç—Ä–∞–¥–∏?!\""
                ],
                choices: [
                    {text: "üìö –ú–∞—Ä–∫ –ø–∏—à–µ—Ç —Ä–µ—à–µ–Ω–∏–µ", next: 'solveMath1', req: {char: 'mark', age: 17}, reward: true},
                    {text: "ü™ú –í–æ–≤–∞ –ª–µ–∑–µ—Ç –Ω–∞ –ø–∞—Ä—Ç—É", next: 'climbDesk', req: {char: 'vova', age: 2}},
                    {text: "üéµ –ê—Ä—Å–µ–Ω–∏–π —Ç–∞–Ω—Ü—É–µ—Ç –æ—Ç–≤–ª–µ—á–µ–Ω–∏–µ", next: 'danceDistraction1', req: {char: 'arseniy', age: 9}}
                ]
            }
        };

        // 15+ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω –¥–ª—è –¥–æ–ª–≥–æ–π –∏–≥—Ä—ã
        const EXTENDED_SCENES = {
            solveMath1: {
                text: ["‚úÖ –ú–∞—Ä–∫ —Ä–µ—à–∏–ª —É—Ä–∞–≤–Ω–µ–Ω–∏–µ! +100 –æ—á–∫–æ–≤ ‚≠ê", "–£—á–∏—Ç–µ–ª—å –≤ —à–æ–∫–µ! –ü–æ–ª—É—á–∏–ª–∏ –º–∞–≥–∏—á–µ—Å–∫–∏–π <span class='success'>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</span>!"],
                reward: true,
                choices: [{text: "‚û°Ô∏è –í —Å—Ç–æ–ª–æ–≤—É—é", next: 'schoolCanteen'}]
            },
            schoolCanteen: {
                text: ["üè™ –®–∫–æ–ª—å–Ω–∞—è —Å—Ç–æ–ª–æ–≤–∞—è. –í–æ–≤–∞(2) —Ö–æ—á–µ—Ç —Å–æ–∫, –Ω–æ –Ω–µ –¥–æ—Å—Ç–∞–µ—Ç üò¢", "–ë–æ–≥–¥–∞–Ω(15) ‚Äî –ø–æ–≤–∞—Ä –Ω–∞ —Ä–∞–∑–¥–∞—á–µ! üòÇ"],
                choices: [
                    {text: "ü•§ –í–æ–≤–∞ —Ç—è–Ω–µ—Ç—Å—è –∑–∞ —Å–æ–∫–æ–º", next: 'juicePuzzle', req: {char: 'vova', age: 2}},
                    {text: "üç≤ –ë–æ–≥–¥–∞–Ω –≥–æ—Ç–æ–≤–∏—Ç –æ–±–µ–¥", next: 'cookingMinigame', req: {char: 'bogdan', age: 15}},
                    {text: "üõí –ö—É–ø–∏—Ç—å –±—É–ª–æ—á–∫—É", next: 'buyBun'}
                ]
            }
        };

        function initGame() {
            updateTimer();
            updateCharacters();
            updateStatus();
            showScene('park');
        }

        function showScene(sceneId) {
            let scene = {...FULL_GAME[sceneId] || EXTENDED_SCENES[sceneId] || generateComplexScene(sceneId)};
            
            gameState.currentScene = sceneId;
            gameState.level = Math.min(15, gameState.level + 1);
            
            const sceneEl = document.getElementById('scene');
            sceneEl.innerHTML = '';
            sceneEl.classList.add('typewriter');
            
            const fullText = scene.text.join('<br><br>');
            typeWriter(fullText, sceneEl, () => {
                sceneEl.classList.remove('typewriter');
                showChoices(scene.choices);
                if (scene.effect === 'randomize') randomizeAges();
            });
        }

        function typeWriter(text, element, callback) {
            element.innerHTML = '';
            let i = 0;
            function type() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, 60 + Math.random() * 20); // –ë–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –ø–µ—á–∞—Ç—å
                } else {
                    if (callback) callback();
                }
            }
            type();
        }

        function showChoices(choices) {
            const choicesEl = document.getElementById('choices');
            choicesEl.innerHTML = '';
            
            choices.forEach((choice, index) => {
                const btn = document.createElement('button');
                btn.innerText = choice.text;
                btn.style.animationDelay = `${index * 0.2}s`;
                
                const canUse = !choice.req || checkRequirement(choice.req);
                btn.disabled = !canUse;
                btn.title = !canUse ? `–ù—É–∂–µ–Ω ${choice.req.char} ${choice.req.age} –ª–µ—Ç!` : '';
                
                btn.onclick = () => handleChoice(choice);
                choicesEl.appendChild(btn);
            });
        }

        function checkRequirement(req) {
            const char = gameState.characters[req.char];
            return char.age === req.age;
        }

        function handleChoice(choice) {
            // –ê–Ω–∏–º–∞—Ü–∏—è –∫–ª–∏–∫–∞
            const btn = event.target;
            btn.style.transform = 'scale(0.95)';
            setTimeout(() => btn.style.transform = '', 150);
            
            if (choice.reward) {
                gameState.magicItems = Math.min(5, gameState.magicItems + 1);
                gameState.score += 250;
                showRewardEffect('ü™ô –ú–∞–≥–∏—á–µ—Å–∫–∏–π –ø—Ä–µ–¥–º–µ—Ç +1!');
            }
            
            gameState.score += 100;
            
            setTimeout(() => {
                if (choice.next) {
                    if (choice.next === 'finalBoss' && gameState.magicItems >= 5) {
                        showVictory();
                    } else {
                        showScene(choice.next);
                    }
                }
            }, 1000);
            
            updateStatus();
        }

        function randomizeAges() {
            const ages = [2, 9, 15, 17];
            Object.values(gameState.characters).forEach((char, index) => {
                char.age = ages[index]; // –ö–∞–∂–¥—ã–π —Ä–∞–∑ –Ω–æ–≤–∞—è —Å–ª—É—á–∞–π–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è
                setTimeout(() => showAgeEffect(char.name, char.age), index * 300);
            });
        }

        function showAgeEffect(name, age) {
            const effect = document.createElement('div');
            effect.className = 'age-effect';
            effect.innerHTML = `${name}<br><span style="font-size:0.6em">${age} –ª–µ—Ç!</span>`;
            document.body.appendChild(effect);
            setTimeout(() => effect.remove(), 3000);
        }

        function generateComplexScene(sceneId) {
            const locations = ['—Ç–æ—Ä–≥–æ–≤—ã–π —Ü–µ–Ω—Ç—Ä', '–±–∏–±–ª–∏–æ—Ç–µ–∫–∞', '—Å–ø–æ—Ä—Ç–ø–ª–æ—â–∞–¥–∫–∞', '—Å–µ–∫—Ä–µ—Ç–Ω–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è', '–∑–∞–±—Ä–æ—à–µ–Ω–Ω—ã–π –¥–æ–º'];
            const puzzles = ['–ø–∞–∑–ª', '—Ç–∞–Ω–µ—Ü', '–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ', '–∫—É–ª–∏–Ω–∞—Ä–∏—è', '—Å–ø–æ—Ä—Ç'];
            
            return {
                text: [
                    `üåÜ <span class="highlight">${locations[Math.floor(Math.random()*locations.length)]}</span>`,
                    `–ù—É–∂–µ–Ω –ø–µ—Ä—Å–æ–Ω–∞–∂ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞ –¥–ª—è ${puzzles[Math.floor(Math.random()*puzzles.length)]}!`,
                    "–ö—Ç–æ —Å–º–æ–∂–µ—Ç –ø–æ–º–æ—á—å –∫–æ–º–∞–Ω–¥–µ? ü§î"
                ],
                choices: [
                    {text: "üë®‚Äçüíª –í–æ–≤–∞ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É", next: 'techPuzzle', req: {char: 'vova', age: 17}},
                    {text: "üé∏ –ê—Ä—Å–µ–Ω–∏–π –≤—ã—Å—Ç—É–ø–∞–µ—Ç", next: 'dancePuzzle', req: {char: 'arseniy', age: 15}},
                    {text: "üîç –ë–æ–≥–¥–∞–Ω —Å–æ–±–∏—Ä–∞–µ—Ç –ø–∞–∑–ª", next: 'logicPuzzle', req: {char: 'bogdan', age: 9}},
                    {text: "üçº –ú–∞—Ä–∫ –Ω–∞—Ö–æ–¥–∏—Ç –ª–∞–∑–µ–π–∫—É", next: 'babyPuzzle', req: {char: 'mark', age: 2}}
                ]
            };
        }

        function updateCharacters() {
            const container = document.getElementById('characters');
            container.innerHTML = '';
            
            Object.values(gameState.characters).forEach(char => {
                const card = document.createElement('div');
                card.className = `character-card age-${char.age}`;
                card.innerHTML = `
                    <div style="font-size:3em;margin-bottom:10px">${char.emoji}</div>
                    <div style="font-size:1.3em;font-weight:bold">${char.name}</div>
                    <div style="font-size:2.8em;margin:10px 0">${char.age}<span style="font-size:0.5em">–ª–µ—Ç</span></div>
                    <div style="font-size:0.9em;color:#666">${char.skills[0]}</div>
                `;
                container.appendChild(card);
            });
        }

        function updateStatus() {
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('magic-count').textContent = `${gameState.magicItems}/5`;
            document.getElementById('score-value').textContent = gameState.score;
            
            const progress = (gameState.level / 15) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
        }

        function updateTimer() {
            gameState.playTime++;
            document.getElementById('playtime').textContent = 
                new Date(gameState.playTime * 1000).toISOString().substr(14, 5);
        }
        setInterval(updateTimer, 1000);

        function showRewardEffect(text) {
            const effect = document.createElement('div');
            effect.className = 'age-effect';
            effect.style.background = 'rgba(39, 174, 96, 0.9)';
            effect.style.color = 'white';
            effect.style.borderRadius = '20px';
            effect.style.padding = '20px';
            effect.textContent = text;
            document.body.appendChild(effect);
            setTimeout(() => effect.remove(), 3000);
        }

        function showVictory() {
            document.querySelector('.container').style.display = 'none';
            document.getElementById('victory-screen').classList.remove('hidden');
            createEpicEmojiRain();
        }

        function createEpicEmojiRain() {
            const rain = document.createElement('div');
            rain.className = 'emoji-rain';
            document.body.appendChild(rain);
            
            const emojis = ['üéâ','‚≠ê','üèÜ','‚ú®','üéà','üéä','üéÅ','üëë'];
            function dropEmoji() {
                const emoji = document.createElement('div');
                emoji.className = 'emoji';
                emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                emoji.style.left = Math.random() * 100 + '%';
                emoji.style.fontSize = (2 + Math.random() * 2) + 'em';
                emoji.style.animationDuration = (3 + Math.random() * 3) + 's';
                rain.appendChild(emoji);
                setTimeout(() => emoji.remove(), 7000);
            }
            const interval = setInterval(dropEmoji, 200);
            setTimeout(() => clearInterval(interval), 15000);
        }

        // –ó–∞–ø—É—Å–∫ –≠–ü–ò–ß–ù–û–ô –∏–≥—Ä—ã –Ω–∞ 15+ –º–∏–Ω—É—Ç!
        window.onload = initGame;
    </script>
</body>
</html>

